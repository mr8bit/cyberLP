!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var n=t();for(var r in n)("object"==typeof exports?exports:e)[r]=n[r]}}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";var r=n(1),o=n(2);e.exports="dragularModule",angular.module("dragularModule",[]).factory("dragularService",o).directive("dragular",r)},function(e,t){"use strict";var n=function(e){return{restrict:"A",link:function(t,n,r){function o(e){try{return JSON.parse(e)}catch(t){return}}var i=t.$eval(r.dragular)||o(r.dragular)||{};r.dragularModel&&(i.containersModel=r.dragularModel,i.scope||(i.scope=t)),r.dragularNameSpace&&(i.nameSpace=r.dragularNameSpace.split(" ")),r.dragularOnInit&&(i.onInit=t.$eval(r.dragularOnInit)),e(n[0],i)}}};n.$inject=["dragularService"],e.exports=n},function(e,t){"use strict";var n={classesCache:{},containersCtx:{},containers:{},mirror:null,source:null,item:null,copy:null,sourceItem:null,sourceModel:null,sourceFilteredModel:null,target:null,targetCtx:null,targetModel:null,lastDropTarget:null,offsetX:null,offsetY:null,moveX:null,moveY:null,offsetXr:null,offsetYb:null,clientX:null,clientY:null,mirrorWidth:null,mirrorHeight:null,initialSibling:null,currentSibling:null,initialIndex:null,currentIndex:null,tempModel:null,dragOverEvents:{},lastElementBehindCursor:null,grabbed:null},r=function(e,t){function r(r,d){function x(){1!==arguments.length||w(r)||angular.isElement(r)||r[0]||"string"==typeof r?"string"==typeof r&&(ge=document.querySelectorAll(r)):(fe=r||{},ge=[]),me=fe.copyOptions?angular.copy(fe):fe}function b(){var e=angular.extend({},xe,me);angular.extend(me,e),me.classes&&(e=angular.extend({},ve,me.classes),angular.extend(me.classes,e)),me.eventNames&&(e=angular.extend({},he,me.eventNames),angular.extend(me.eventNames,e))}function N(){h(me.boundingBox)||(me.boundingBox=!1),me.containers&&(ge=me.containers),me.containers=o(ge,!1,me.scope),me.containersModel=o(me.containersModel,!0,me.scope),w(me.containersFilteredModel)?me.containersFilteredModel=w(me.containersFilteredModel[0])?me.containersFilteredModel:[me.containersFilteredModel]:me.containersFilteredModel=[],me.nameSpace||(me.nameSpace=["dragularCommon"]),w(me.nameSpace)||(me.nameSpace=[me.nameSpace]),me.nameSpace.forEach(function(e){n.containers[e]||(n.containers[e]=[],n.containersCtx[e]=[]);for(var t,r=_(me).length,o=0;o<r;o++){if(t=_(me)[o],!t)throw new Error("Container element must be defined!");if(n.containers[e].indexOf(t)!==-1)throw new Error("Cannot register container element more than once! Container element: ");n.containers[e].push(t),n.containersCtx[e].push({o:me,m:ee(me)[o],fm:me.containersFilteredModel[o]})}})}function $(e){var t=e?"off":"on";i(T,t,"mouseup",re),_(me).forEach(function(e){i(e,"on","mousedown",A)}),e||angular.forEach(["dragularenter","dragularleave","dragularrelease"],function(e){var t=me.eventNames[e];n.dragOverEvents[t]||(O.createEvent?(n.dragOverEvents[t]=O.createEvent("HTMLEvents"),n.dragOverEvents[t].initEvent(t,!0,!0)):(n.dragOverEvents[t]=O.createEventObject(),n.dragOverEvents[t].eventType=t))})}function A(e){if(1===u(e)&&!e.metaKey&&!e.ctrlKey){n.moveX=e.clientX,n.moveY=e.clientY;var t=j(e.target);t&&t.item&&(n.grabbed=t,D(),"mousedown"===e.type&&(S(e.target)?e.target.focus():e.preventDefault()))}}function D(e){var t=e?"off":"on";i(T,t,"mousemove",F)}function F(e){if(n.grabbed&&!ye.dragging){if(e.originalEvent&&(e=e.originalEvent),0===u(e))return void re({});if(!e.clientX||e.clientX!==n.moveX||!e.clientY||e.clientY!==n.moveY){if(pe(me.ignoreInputTextSelection)){var t=C("clientX",e),r=C("clientY",e),o=O.elementFromPoint(t,r);if(S(o))return}var i=n.grabbed;if(D("remove"),H(),R(),L(i),n.item){if(!me.direction&&E(n.sourceItem)){var a=n.sourceItem.parentNode,l=a.offsetHeight,c=a.offsetWidth,s=n.sourceItem.clientHeight,d=n.sourceItem.clientWidth;me.direction=l/s<c/d?"horizontal":"vertical"}var g=m(n.sourceItem);n.offsetX=C("pageX",e)-g.left,n.offsetY=C("pageY",e)-g.top,n.clientX=C("clientX",e),n.clientY=C("clientY",e),me.boundingBox&&(n.offsetXr=C("pageX",e)-g.right,n.offsetYb=C("pageY",e)-g.bottom),e.preventDefault(),k(),y(n.item,me.classes.transit),n.mirror.style.left=n.clientX-n.offsetX+"px",n.mirror.style.top=n.clientY-n.offsetY+"px",z(e)}}}}function H(e){var t=e?"off":"on";i(T,t,"selectstart",s),i(T,t,"click",s),i(T,t,"touchmove",s)}function j(e){if(!ye.dragging||!n.mirror){for(var t=e;E(e)&&!Z(E(e));){if(me.invalid(e,t))return;if(e=E(e),!e)return}var r=E(e);if(r&&!me.invalid(e,t)&&me.moves(e,r,t,v(e)))return{item:e,source:r}}}function L(e){n.sourceItem=n.item=e.item,n.source=e.source,n.initialSibling=n.currentSibling=v(e.item),pe(me.copy,[e.item,e.source])?(n.item=e.item.cloneNode(!0),n.copy=!0,me.scope&&me.scope.$emit(me.eventNames.dragularcloned,n.item,e.item)):n.copy=!1;var t=_(me).indexOf(e.source);return n.sourceModel=ee(me)[t],n.sourceFilteredModel=me.containersFilteredModel[t],n.initialIndex=I(e.item,e.source),ye.dragging=!0,me.scope&&me.scope.$emit(me.eventNames.dragulardrag,n.sourceItem,n.source),!0}function P(e){var t=j(e);t&&(n.grabbed=t,D())}function k(){if(!n.mirror){var e=n.sourceItem.getBoundingClientRect();n.mirror=n.sourceItem.cloneNode(!0),n.mirrorWidth=e.width,n.mirrorHeight=e.height,n.mirror.style.width=g(e)+"px",n.mirror.style.height=f(e)+"px",y(n.mirror,me.classes.mirror),me.mirrorContainer.appendChild(n.mirror),i(T,"on","mousemove",z),y(O.body,me.classes.unselectable),i(n.mirror,"on","wheel",ue),me.scope&&me.scope.$emit(me.eventNames.dragularcloned,n.mirror,n.sourceItem)}}function R(){ye.dragging&&n.item&&oe(n.item,E(n.item))}function W(){n.grabbed=!1,D("remove"),H("remove")}function z(e){function t(t){function r(r){r.$emit(me.eventNames["dragular"+t],n.item,n.lastDropTarget,n.source,e)}me.scope&&r(me.scope),n.targetCtx&&n.targetCtx.o.scope&&n.targetCtx.o.scope!==me.scope&&r(n.targetCtx.o.scope),pe(me.removeOnSpill)===!0&&("over"===t?U():q())}if(n.mirror){e.originalEvent&&(e=e.originalEvent),n.clientX=C("clientX",e),n.clientY=C("clientY",e);var r,o,i,a=n.clientX-n.offsetX,l=n.clientY-n.offsetY;me.boundingBox&&(r=C("pageX",e),o=C("pageY",e),i=m(me.boundingBox)),me.lockY||(!me.boundingBox||r>i.left+n.offsetX&&r<i.right+n.offsetXr?n.mirror.style.left=a+"px":me.boundingBox&&(r<i.left+n.offsetX?n.mirror.style.left=n.clientX-(r-i.left)+"px":n.mirror.style.left=n.clientX-n.mirrorWidth-(r-i.right)+"px")),me.lockX||(!me.boundingBox||o>i.top+n.offsetY&&o<i.bottom+n.offsetYb?n.mirror.style.top=l+"px":me.boundingBox&&(o<i.top+n.offsetY?n.mirror.style.top=n.clientY-(o-i.top)+"px":n.mirror.style.top=n.clientY-n.mirrorHeight-(o-i.bottom)+"px"));var c=V(n.mirror,n.clientX,n.clientY),u=K(c,n.clientX,n.clientY),s=u!==n.lastDropTarget;if(c!==n.lastElementBehindCursor&&(X(c,n.dragOverEvents.dragularenter,!!u),n.lastElementBehindCursor&&X(n.lastElementBehindCursor,n.dragOverEvents.dragularleave,c),n.lastElementBehindCursor=c),s&&(n.lastDropTarget&&t("out"),n.lastDropTarget=u,t("over")),u===n.source&&n.copy&&!pe(me.copySortSource))return void(E(n.item)&&n.item.parentNode.removeChild(n.item));var d,g=G(u,c);if(null!==g)d=Q(u,g,n.clientX,n.clientY);else{if(pe(me.revertOnSpill)!==!0||n.copy)return void(n.copy&&E(n.item)&&n.item.parentNode.removeChild(n.item));d=n.initialSibling,u=n.source}(null===d||d!==n.item&&d!==v(n.item)&&d!==n.currentSibling)&&(n.currentSibling=d,u.insertBefore(n.item,d),me.scope&&me.scope.$emit(me.eventNames.dragularshadow,n.item,u,e))}}function K(e,t,r){function o(){if(!Z(a))return!1;for(var o,c=G(a,e),u=Q(a,c,t,r),s=J(a,u),d=me.nameSpace.length;d--;)if(o=me.nameSpace[d],n.containers[o].indexOf(a)!==-1){l=i(o);break}return n.target=a,!!s||(l||(l=i("dragularCommon")),l&&B(l.o.containersModel)&&(l.m=ee(l.o)[_(l.o).indexOf(a)]),!(l&&l.o.accepts&&!l.o.accepts(n.item,a,n.source,u,n.sourceModel,n.initialIndex))&&(!(me.isContainer&&me.isContainerAccepts&&!me.isContainerAccepts(n.item,a,n.source,u,n.sourceModel,n.initialIndex))&&(!me.canBeAccepted||me.canBeAccepted(n.item,a,n.source,u,n.sourceModel,n.initialIndex))))}function i(e){return n.containersCtx[e][n.containers[e].indexOf(a)]}for(var a=e,l=null;a&&!o();)a=E(a);return l&&(n.targetCtx=l),a}function U(){M(n.item,me.classes.hide)}function q(){ye.dragging&&y(n.item,me.classes.hide)}function J(e,t){var r=void 0!==t?t:n.mirror?n.currentSibling:v(n.item);return e===n.source&&r===n.initialSibling}function G(e,t){for(var n=t;n!==e&&E(n)!==e;)n=E(n);return n===T?null:n}function Q(e,t,n,r){function o(){var t,o,i,a=e.children.length;for(t=0;t<a;t++){if(o=e.children[t],i=o.getBoundingClientRect(),l&&i.left>n)return o;if(!l&&i.top>r)return o}return null}function i(){var e=t.getBoundingClientRect();return a(l?n>e.left+g(e)/2:r>e.top+f(e)/2)}function a(e){return e?v(t):t}var l="horizontal"===me.direction;return t!==e?i():o()}function V(e,t,n){var r,o=e||{},i=o.className;return o.className+=" "+me.classes.hide,r=O.elementFromPoint(t,n),o.className=i,r}function Z(e){if(!e)return!1;for(var t=me.nameSpace.length;t--;)if(n.containers[me.nameSpace[t]].indexOf(e)!==-1)return!0;return me.isContainer(e)?(n.tempModel=me.isContainerModel(e),!0):(n.tempModel=null,!1)}function _(e){return te("containers",e)}function ee(e){return te("containersModel",e,!0)}function te(e,t,r){return B(t[e])?o(t[e](t===me?ye:null,n),r,t.scope):t[e]}function ne(e){if(ye.dragging){var t=arguments.length>0?e:pe(me.revertOnSpill),r=E(n.item),o=J(r);o||n.copy||!t||n.source.insertBefore(n.item,n.initialSibling),!n.sourceModel||n.copy||t?me.scope&&(o||t)&&me.scope.$emit(me.eventNames.dragularcancel,n.item,n.source,n.sourceModel,n.initialIndex):oe(n.item,r),(!n.sourceModel||n.copy||t||o)&&ae()}}function re(e){if(W(),ye.dragging){e.originalEvent&&(e=e.originalEvent),n.clientX=C("clientX",e),n.clientY=C("clientY",e);var t=V(n.mirror,n.clientX,n.clientY),r=K(t,n.clientX,n.clientY);r&&(n.copy&&pe(me.copySortSource)||!n.copy||r!==n.source)?oe(n.item,r):pe(me.removeOnSpill)?ie():ne(),n.target=null,n.lastElementBehindCursor&&X(n.lastElementBehindCursor,n.dragOverEvents.dragularrelease,t),me.scope&&me.scope.$emit(me.eventNames.dragularrelease,n.item,n.source,e)}}function oe(r,o){function a(){function e(e){J(o)?e.$emit(me.eventNames.dragularcancel,r,n.source,n.sourceModel,n.initialIndex):e.$emit(me.eventNames.dragulardrop,r,o,n.source,n.sourceModel,n.initialIndex,n.targetModel,u)}if(_(me).forEach(function(e){i(e,"off","mousedown",A),i(e,"on","mousedown",A)}),me.compileItemOnDrop){var a=angular.element(o).scope?angular.element(o).scope():me.scope;a&&a.$applyAsync(function(){var e=t(n.copy?l.cloneNode(!0):l)(a);r.parentNode===o&&o.removeChild(r),o.insertBefore(e[0],c),ae()})}me.scope&&e(me.scope),n.targetCtx&&n.targetCtx.o.scope&&n.targetCtx.o.scope!==me.scope&&e(n.targetCtx.o.scope),me.compileItemOnDrop||ae()}if(!r)return void ae();var l=n.sourceItem,c=n.currentSibling,u=I(r,o);n.copy&&o===n.source&&E(r)&&pe(me.copySortSource)&&r.parentNode.removeChild(n.sourceItem),n.sourceModel&&!J(o)?(n.targetCtx&&n.targetCtx.fm&&(u=n.targetCtx.m.indexOf(n.targetCtx.fm[u])),n.sourceFilteredModel&&(n.initialIndex=n.sourceModel.indexOf(n.sourceFilteredModel[n.initialIndex])),e.$applyAsync(function(){n.sourceModel&&(o===n.source?n.sourceModel.splice(u,0,n.sourceModel.splice(n.initialIndex,1)[0]):(n.dropElmModel=n.copy&&!me.dontCopyModel?angular.copy(n.sourceModel[n.initialIndex]):n.sourceModel[n.initialIndex],n.tempModel?n.targetModel=n.tempModel:n.targetModel=n.targetCtx&&n.targetCtx.m||n.sourceModel,r.parentNode.removeChild(r),n.copy||n.sourceModel.splice(n.initialIndex,1),n.targetModel&&n.targetModel.splice(u,0,n.dropElmModel)),E(r)&&r.parentNode.removeChild(r),a())})):a()}function ie(){if(ye.dragging){var t=E(n.item);t&&t.removeChild(n.item),n.sourceModel&&e.$applyAsync(function(){n.sourceModel.splice(n.initialIndex,1),ae()}),me.scope&&me.scope.$emit(n.copy?me.eventNames.dragularcancel:me.eventNames.dragularremove,n.item,t,n.sourceModel,n.initialIndex),n.sourceModel||ae()}}function ae(){W(),se(),n.item&&M(n.item,me.classes.transit),ye.dragging=!1,pe(me.removeOnSpill)===!0&&q(),me.scope&&(n.lastDropTarget&&me.scope.$emit(me.eventNames.dragularout,n.item,n.lastDropTarget,n.source),me.scope.$emit(me.eventNames.dragulardragend,n.item)),n.source=n.item=n.sourceItem=n.initialSibling=n.currentSibling=n.sourceModel=null,n.initialIndex=n.currentIndex=n.lastDropTarget=n.tempModel=n.targetModel=null,n.dropElmModel=n.targetCtx=n.copy=n.moveX=n.moveY=null}function le(){$(!0),ce(me.containers),re({})}function ce(t){e.$applyAsync(function(){var e=w(t)?t:c(t);e.forEach(function(e){angular.forEach(me.nameSpace,function(t){var r;r=n.containers[t].indexOf(e),n.containers[t].splice(r,1),n.containersCtx[t].splice(r,1)})})})}function ue(e){if(n.target){e.originalEvent&&(e=e.originalEvent);var t=n.target.scrollTop;n.target.scrollTop+=e.deltaY,t!==n.target.scrollTop&&(e.stopPropagation(),e.preventDefault())}}function se(){n.mirror&&(M(O.body,me.classes.unselectable),i(T,"off","mousemove",z),i(n.mirror,"off","wheel",ue),E(n.mirror)&&n.mirror.parentNode.removeChild(n.mirror),n.mirror=null)}function de(e){o(e,!0,me.scope)}var me,ge=r||[],fe=d||{},pe=Y,ve={mirror:"gu-mirror",hide:"gu-hide",unselectable:"gu-unselectable",transit:"gu-transit"},he={dragularenter:"dragularenter",dragularleave:"dragularleave",dragularrelease:"dragularrelease",dragularcloned:"dragularcloned",dragulardrag:"dragulardrag",dragularcancel:"dragularcancel",dragulardrop:"dragulardrop",dragularremove:"dragularremove",dragulardragend:"dragulardragend",dragularshadow:"dragularshadow",dragularover:"dragularover",dragularout:"dragularout"},xe={copyOptions:!1,classes:ve,eventNames:he,containers:!1,containersModel:!1,containersFilteredModel:!1,isContainer:a,isContainerModel:p,isContainerAccepts:l,moves:l,accepts:l,canBeAccepted:l,copy:!1,copySortSource:!1,dontCopyModel:!1,invalid:a,revertOnSpill:!1,removeOnSpill:!1,lockX:!1,lockY:!1,boundingBox:!1,mirrorContainer:O.body,ignoreInputTextSelection:!0,compileItemOnDrop:!1,onInit:!1},ye={containers:n.containers,containersCtx:n.containersCtx,sanitizeContainersModel:de,sanitizeContainers:o,isContainer:Z,start:P,end:R,cancel:ne,remove:ie,destroy:le,dragging:!1};return x(),b(),N(),$(),me.onInit&&me.onInit(ye,me),ye}function o(e,t,n){if(B(e))return e;if(w(e))return t?w(e[0])?e:[e]:e;if("string"==typeof e&&n){var r=n.$eval(e);return B(r)?r:function(){return n.$eval(e)}}return e?c(e):[]}function i(e,t,n,r){var o={mouseup:"touchend",mousedown:"touchstart",mousemove:"touchmove"},i={mouseup:"pointerup",mousedown:"pointerdown",mousemove:"pointermove"},a={mouseup:"MSPointerUp",mousedown:"MSPointerDown",mousemove:"MSPointerMove"},l=angular.element(e);if(e.addEventListener){var c={on:"addEventListener",off:"removeEventListener"};e[c[t]](n,r,{passive:!1}),e[c[t]](o[n],r,{passive:!1})}else"undefined"!=typeof navigator&&navigator.pointerEnabled&&i[n]?l[t](i[n],r):"undefined"!=typeof navigator&&navigator.msPointerEnabled&&a[n]?l[t](a[n],r):o[n]&&l[t](o[n],r),l[t](n,r)}function a(){return!1}function l(){return!0}function c(e,t){return w(e)?e:e.length?Array.prototype.slice.call(e,t):[e]}function u(e){if(e.touches)return e.touches.length;if(e.originalEvent&&e.originalEvent.touches)return e.originalEvent.touches.length;if(void 0!==e.which&&0!==e.which)return e.which;if(void 0!==e.buttons)return e.buttons;var t=e.button;return void 0!==t?1&t?1:2&t?3:4&t?2:0:void 0}function s(e){e.originalEvent&&(e=e.originalEvent),n.grabbed&&e.preventDefault()}function d(e,t){return"undefined"!=typeof window[t]?window[t]:T.clientHeight?T[e]:O.body[e]}function m(e){var t=e.getBoundingClientRect(),n=d("scrollTop","pageYOffset"),r=d("scrollLeft","pageXOffset");return{left:t.left+r,right:t.right+r,top:t.top+n,bottom:t.bottom+n}}function g(e){return e.width||e.right-e.left}function f(e){return e.height||e.bottom-e.top}function p(){return{}}function v(e){function t(){var t=e;do t=t.nextSibling;while(t&&1!==t.nodeType);return t}if(e)return e.nextElementSibling||t()}function h(e){return"object"==typeof HTMLElement?e instanceof HTMLElement:e&&"object"==typeof e&&null!==e&&1===e.nodeType&&"string"==typeof e.nodeName}function x(e){var t=n.classesCache[e];return t?t.lastIndex=0:n.classesCache[e]=t=new RegExp("(?:^|\\s)"+e+"(?:\\s|$)","g"),t}function y(e,t){var n=e.className;n.length?x(t).test(n)||(e.className+=" "+t):e.className=t}function M(e,t){e.className=e.className.replace(x(t)," ").trim()}function b(e){return e.targetTouches&&e.targetTouches.length?e.targetTouches[0]:e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e}function C(e,t){var n=b(t),r={pageX:"clientX",pageY:"clientY"};return e in r&&!(e in n)&&r[e]in n&&(e=r[e]),!n.type||n.type.indexOf("touch")<0?n[e]:n.type.indexOf("end")===-1&&n.originalEvent.touches[0][e.replace("client","page")]}function E(e){return e.parentNode===document?null:e.parentNode}function S(e){return"INPUT"===e.tagName||"TEXTAREA"===e.tagName||"SELECT"===e.tagName||N(e)}function N(e){return!!e&&("false"!==e.contentEditable&&("true"===e.contentEditable||N(E(e))))}function I(e,t){return Array.prototype.indexOf.call(angular.element(t).children(),e)}function X(e,t,r){e&&(n.extra=r,e.dispatchEvent?e.dispatchEvent(t):e.fireEvent("on"+t.eventType,t))}function Y(e,t,r){return B(e)?!!e.apply(r||this,t||n):!!e}var O=document,T=O.documentElement,w=Array.isArray,B=angular.isFunction;return r.cleanEnviroment=function(){n.classesCache={},n.containersCtx={},n.containers={},n.mirror=void 0},r.shared=n,r};r.$inject=["$rootScope","$compile"],e.exports=r}])});
//# sourceMappingURL=dragular.min.js.map
