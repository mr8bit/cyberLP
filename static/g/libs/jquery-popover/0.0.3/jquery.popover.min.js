var myo=function(a,b,c){function l(){h=$('<div class="popover-container" id="popover-container"></div>').appendTo("body"),i=$('<div class="popover-dim"></div>').appendTo(h),i.on("click",k.close),$(b).on("keydown",function(a){27===a.keyCode&&g&&k.close()}),f=!0}function m(){return!!i.length&&void i.css("display","block").stop().animate({opacity:.5},100)}function n(){return!!i.length&&void i.stop().animate({opacity:0},100,function(){i.css("display","none")})}function o(){var c,d,e,f;c=Math.max(b.documentElement.scrollLeft,b.body.scrollLeft),e=b.documentElement.clientWidth,b.documentElement.style.overflow="visible",b.body.style.overflow="hidden",f=b.documentElement.clientWidth-e,d=Math.max(b.documentElement.scrollLeft,b.body.scrollLeft),j=c-d,b.body.style.borderRight=f+"px solid transparent",a.scrollBy(c-d,0),b.body.scrollLeft+=1,b.body.scrollLeft+=-1}function p(){b.documentElement.style.overflow="",b.body.style.overflow="",b.body.style.borderRight="",a.scrollBy(j,0)}var j,k,e=($(a),[]),f=!1,g=!1,h=null,i=null;return k={open:function(a){var b=new PopoverWin(a);f||l(),g||m(),e.length&&k.winLast().disable(),e.push(b),b.scrollDiv.appendTo(h),1===e.length&&o(),b.open(),g=!0},close:function(a){e.length&&(k.winLast().close(),e.pop()),e.length?k.winLast().enable():(n(),g=!1,p())},winLast:function(){return e[e.length-1]},winFirst:function(){return e[0]},win:function(a){return e[a]}},PopoverWin=function(a){this.options=a||{},this.scrollDiv,this.wrapDiv,this.bodyDiv,this.loadDiv,this.closDiv,this.isHidden,this.timerId,this.init()},PopoverWin.prototype.init=function(){var a=this;a.scrollDiv=$('<div class="popover-scrolling"></div>'),a.wrapDiv=$('<div class="popover-wrap"></div>').appendTo(a.scrollDiv),a.bodyDiv=$('<div class="popover-body"></div>').appendTo(a.wrapDiv),a.loadDiv=$('<div class="popover-loader"></div>').appendTo(a.wrapDiv),a.closDiv=$('<div class="popover-close"></div>').appendTo(a.wrapDiv),a.scrollDiv.on("click",function(b){(2===b.eventPhase||$(b.target).is(a.scrollDiv))&&k.close()}),a.closDiv.on("click",function(){k.close()}),a.loadDiv.on("click",function(){k.close()})},PopoverWin.prototype.enable=function(){this.scrollDiv.removeClass("disable")},PopoverWin.prototype.disable=function(){this.scrollDiv.addClass("disable")},PopoverWin.prototype.open=function(){var a=this,c=this.options,d=c.width||null,e=c.html||null,f=c.text||null,g=c.elem||null,h=c.clas||null,i=c.ajax||null,j=c.json||null,k=c.data||{},l=c.iframe||null,m=c.onLoad||null,n=c.beforeOpen||null,o=c.afterOpen||null;h&&a.wrapDiv.addClass(h),d&&a.wrapDiv.width(d),e?a.bodyDiv.html(e):f?a.bodyDiv.text(f):g?(a.htmlElem=g=$(g),a.bodyDiv.append(g.contents())):j?(a.loadDiv.show(),$.ajax({url:j,dataType:"json",data:k,success:function(b){var c=Array.prototype.slice.call(arguments,0);a.loadDiv.hide(),b.result&&b.result.html&&a.bodyDiv.html(b.result.html),m&&$.isFunction(m)&&m.apply(a,c)},error:function(b,c,d){a.loadDiv.hide(),a.bodyDiv.html(c)}})):i?(a.loadDiv.show(),$.ajax({url:i,data:k,success:function(b){var c=Array.prototype.slice.call(arguments,0);a.loadDiv.hide(),a.bodyDiv.html(b),m&&$.isFunction(m)&&m.apply(a,c)},error:function(b,c,d){a.loadDiv.hide(),a.bodyDiv.html(c)}})):l&&!function(){function f(){function e(a){var d,b=["scroll","client","offset"],e=0;for(d=b.length-1;d>=0;d--)e=Math.max(e,c.documentElement[b[d]+a]||0,c.body[b[d]+a]||0);return e}function f(){clearTimeout(a.iframeTimerId),a.iframeTimerId=setTimeout(function(){var a=e("Width"),b=e("Height");b>0&&(iframeElem.height=b),!d&&a>0&&(iframeElem.width=a),requestAnimationFrame(f)},1e3)}var b,c;try{b=iframeElem.contentWindow||iframeElem.contentDocument.parentWindow,c=b.document,d&&(d=d-parseInt(a.bodyDiv.css("padding-left"),10)-parseInt(a.bodyDiv.css("padding-left"),10)-parseInt(a.bodyDiv.css("border-left-width"),10)-parseInt(a.bodyDiv.css("border-right-width"),10),iframeElem.width=d),f()}catch(b){a.bodyDiv.html("<h4>"+b.name+"</h4><p>"+b.message+"</p>")}finally{a.loadDiv.hide(),iframeElem.style.visibility="visible",m&&$.isFunction(m)&&m.call(a,iframeElem)}}var c,e;c=["iframe=1"];for(e in k)k.hasOwnProperty(e)&&c.push(e+"="+encodeURI(k[e]));iframeElem=b.createElement("iframe"),iframeElem.frameBorder=0,iframeElem.src=l+"?"+c.join("&"),iframeElem.style.visible="hidden",iframeElem.onload=f,a.bodyDiv.html(iframeElem),a.loadDiv.show()}(),$.isFunction(n)&&n.call(a),a.scrollDiv.show(),a.wrapDiv.fadeIn(300,function(){a.isOpened=!0,$.isFunction(o)&&o.call(a)})},PopoverWin.prototype.close=function(){var a=this.options,b=a.beforeClose||null,c=a.afterClose||null;$.isFunction(b)&&b.call(this),this.htmlElem?(this.bodyDiv.contents().appendTo(this.htmlElem),this.htmlElem=!1):this.bodyDiv.empty(),a.iframe&&clearTimeout(this.iframeTimerId),this.scrollDiv.hide(),this.scrollDiv.remove(),this.isOpened=!1,$.isFunction(c)&&c.call(this)},k}(window,document);!function(){for(var a=0,b=["ms","moz","webkit","o"],c=0;c<b.length&&!window.requestAnimationFrame;++c)window.requestAnimationFrame=window[b[c]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[b[c]+"CancelAnimationFrame"]||window[b[c]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(b,c){var d=(new Date).getTime(),e=Math.max(0,16-(d-a)),f=window.setTimeout(function(){b(d+e)},e);return a=d+e,f}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(a){clearTimeout(a)})}();